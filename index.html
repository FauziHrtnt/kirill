<script>
    // Fungsi untuk menghasilkan data orbit berbentuk elips
    function generateOrbitData(semiMajorAxis) {
        const data = [];
        const eccentricity = 0.1; // Eksentrisitas orbit

        for (let angle = 0; angle <= 360; angle++) {
            const radian = (angle * Math.PI) / 180;
            const r = semiMajorAxis * (1 - eccentricity ** 2) / (1 + eccentricity * Math.cos(radian));
            data.push(r);
        }
        return data;
    }

    // Inisialisasi grafik
    const ctx = document.getElementById("orbitChart").getContext("2d");
    let orbitChart = new Chart(ctx, {
        type: "line",
        data: {
            labels: Array.from({ length: 361 }, (_, i) => i),
            datasets: [
                {
                    label: "Orbit Bumi",
                    data: generateOrbitData(1),
                    borderColor: "blue",
                    fill: false,
                    tension: 0.1,
                },
            ],
        },
        options: {
            responsive: true,
            plugins: {
                legend: {
                    position: 'top',
                },
            },
            scales: {
                x: {
                    title: {
                        display: true,
                        text: "Sudut Orbit (derajat)",
                    },
                },
                y: {
                    title: {
                        display: true,
                        text: "Jarak dari Pusat (AU)",
                    },
                },
            },
        },
    });

    // Fungsi untuk memperbarui grafik
    function updateChart() {
        const object = document.getElementById("objectSelector").value;
        let semiMajorAxis;

        // Menambahkan pilihan planet baru
        switch (object) {
            case "earth":
                semiMajorAxis = 1; // AU
                break;
            case "mars":
                semiMajorAxis = 1.52; // AU
                break;
            case "moon":
                semiMajorAxis = 0.00257; // AU
                break;
            case "jupiter":
                semiMajorAxis = 5.2; // AU
                break;
            case "venus":
                semiMajorAxis = 0.72; // AU
                break;
            case "saturn":
                semiMajorAxis = 9.58; // AU
                break;
            case "neptune":
                semiMajorAxis = 30.07; // AU
                break;
            default:
                semiMajorAxis = 1; // Default to Earth
        }

        // Memperbarui data dan label grafik
        orbitChart.data.datasets[0].data = generateOrbitData(semiMajorAxis);
        orbitChart.data.datasets[0].label = `Orbit ${object.charAt(0).toUpperCase() + object.slice(1)}`;
        orbitChart.update();
    }

    // Tambahkan event listener pada dropdown
    document.getElementById("objectSelector").addEventListener("change", updateChart);
</script>
